const fs = require('fs')
const path = require('path')

// Создаем структуру папок
const directories = [
  'app/content/topics',
  'app/content/pages',
  'public/uploads',
  'public/docs',
  'scripts'
]

directories.forEach(dir => {
  fs.mkdirSync(path.join(__dirname, '..', dir), { recursive: true })
  console.log(`✓ Создана папка: ${dir}`)
})

// Создаем примеры тем
const exampleTopics = [
  {
    number: 1,
    title: "Теоретические основы пожарной безопасности",
    description: "Основные понятия и определения в области пожарной безопасности авиации",
    content: `# Теоретические основы пожарной безопасности

## Введение

Пожарная безопасность в авиации — комплекс организационных и технических мероприятий, направленных на предотвращение пожаров и обеспечение безопасности людей и материальных ценностей.

## Основные понятия

### 1. Пожар
Неконтролируемое горение, причиняющее материальный ущерб, вред жизни и здоровью людей.

### 2. Пожарная опасность
Возможность возникновения и развития пожара.

### 3. Пожарная безопасность
Состояние защищенности личности, имущества, общества и государства от пожаров.`
  },
  {
    number: 2,
    title: "Статистика пожаров в авиации",
    description: "Анализ статистических данных по пожарам в авиации за последние годы",
    content: `# Статистика пожаров в авиации

## Анализ данных

Современная статистика пожаров в авиации показывает определенные тенденции и закономерности.

## Ключевые показатели

| Год | Количество пожаров | Материальный ущерб (млн $) |
|-----|-------------------|---------------------------|
| 2020 | 45 | 12.5 |
| 2021 | 38 | 9.8 |
| 2022 | 42 | 11.2 |
| 2023 | 35 | 8.7 |

## Выводы

1. Наблюдается тенденция к снижению количества пожаров
2. Материальный ущерб также уменьшается
3. Улучшение связано с внедрением новых технологий безопасности`
  }
]

exampleTopics.forEach(topic => {
  const topicContent = `---
topic_number: ${topic.number}
title: "${topic.title}"
description: "${topic.description}"
date: "2025-01-15"
author: "Преподаватель"
keywords:
  - пожарная безопасность
  - авиация
---

${topic.content}`
  
  const filePath = path.join(__dirname, '..', 'app/content/topics', `topic-${topic.number}.md`)
  fs.writeFileSync(filePath, topicContent, 'utf8')
  console.log(`✓ Создана тема ${topic.number}: ${topic.title}`)
})

console.log('\n✅ Настройка проекта завершена!')
console.log('Запустите проект: npm run dev')
console.log('Админка доступна по: /admin')
console.log('Примеры тем: /topics/1, /topics/2')